install.packages(c('purrr','lubridate'))

library(tidyverse)
library(fixest)
library(ggstance)
library(vtable)
library(multcomp)
library(purrr)
library(lubridate)

#Reading in Google Trends Data
trends_files <- list.files(path = 'Lab3_Rawdata' , pattern='trends_', full.names=TRUE)

trends_files <- map_df(trends_files, read_csv) 

#Aggregating the Google Trends Data: 
"Getting date data"

monthorweek <-str_sub(trends_files$monthorweek, 1,10) 
ymd(monthorweek) 

"Aggregating"
trends_files %>% 
  group_by(schname, keyword) %>%
  mutate(index_id = mean(index)/sd(index))

               



